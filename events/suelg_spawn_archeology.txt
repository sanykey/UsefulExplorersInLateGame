namespace = suelg_spawn_archeology

# Calculate the chance for an Archaeological site and spawn
planet_event = {
    id = suelg_spawn_archeology.1
    hide_window = yes
    is_triggered_only = yes

	immediate = {
		set_variable = { which = suelg_archeology_ch_mod value = 1 }
		# The vanilla modifier `ship_archaeological_site_excavation_speed_mult` was used to modify the chance of finding archaeological sites
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = subclass_scientist_explorer M = 0.1 } # not vanilla modifier
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = leader_trait_archaeologist M = 0.1 }
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = leader_trait_archaeologist_2 M = 0.2 }
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = leader_trait_percussive_maintainer M = 0.1 }
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = leader_trait_ancient_knowledge M = 0.1 }
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = leader_trait_frontier_adventurer M = 0.1 }
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = leader_trait_inspired_archaeologist M = 0.15 } # 0.3 is too much
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = leader_trait_scientist_mind_wipe_02 M = 0.2 }
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = gestalt_trait_scientist_mind_wipe_02 M = 0.2 }
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = leader_trait_legendary_far_from_home M = 0.25 }
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = subclass_scientist_scholar M = 0.1 }
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = leader_trait_legendary_ancestors_knowledge M = 0.3 } # 0.75 is too much
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = leader_trait_collective_wisdom M = -0.15 }
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = leader_trait_traumatized M = -0.1 } # -0.30 is pain for players
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = leader_trait_traumatized_2 M = -0.25 } # -1.00 is pain for players
		inline_script = { script = suelg_add_by_tLeader V = suelg_archeology_ch_mod T = has_trait N = leader_trait_black_light_blinded M = -0.25 } # -0.5 is pain for players

		event_target:t_owner = {
			random_owned_leader = {
				limit = {
					is_councilor = yes
					is_councilor_type = councilor_eager_explorers
				}
				event_target:t_planet = {
					change_variable = { which = suelg_archeology_ch_mod value = 0.05 }
				}
			}
		}

		random_list = {
			0 = {
				modifier = {
					add = @suelg_archelogy_spawn_base_weight
				}
				modifier = {
					factor = this.suelg_archeology_ch_mod
				}

				create_archaeological_site = random
			}
			0 = {
				modifier = {
					add = @suelg_archelogy_fail_base_weight
				}
			}
		}
		clear_variable = suelg_archeology_ch_mod
	}
}