namespace = suelg_spawn_resource

# Calculate the chance for an orbital deposit to spawn 
planet_event = {
    id = suelg_spawn_resource.1
    hide_window = yes
    is_triggered_only = yes

	trigger = {
		suelg_can_have_orbital_deposits = yes
	}

	immediate = {

		# set_variable = { which = test value = value:suelg_advanced_survey_lvl_factor } # for debug
		# log = ">> TEST FACTOR. VALUE: [this.test] THIS: [This.GetName]"

		# log = ">> CHECK DEPOSIT. FROM: [from.GetName] THIS: [This.GetName] ROOT: [root.GetName] FROMFROM: [fromfrom.GetName]"
		random_list = {
			0 = {
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "mineral" ADD = 10 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_prospector F = 1.05 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_prospector_2 F = 1.10 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_prospector_3 F = 1.15 }

				planet_event = { id = suelg_spawn_resource.2 } # Spawn mineral deposit
			}
			0 = {
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "energy" ADD = 10 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_prospector F = 1.05 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_prospector_2 F = 1.10 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_prospector_3 F = 1.15 }

				planet_event = { id = suelg_spawn_resource.3 } # Spawn energy deposit
			}
			0 = {
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "trade" ADD = 10 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_prospector F = 1.05 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_prospector_2 F = 1.10 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_prospector_3 F = 1.15 }

				planet_event = { id = suelg_spawn_resource.4 } # Spawn trade deposit
			}
			0 = {
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "alloy" ADD = 3 }
				planet_event = { id = suelg_spawn_resource.5 } # Spawn alloy deposit
			}
			0 = {
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "zro" ADD = 3 }
				planet_event = { id = suelg_spawn_resource.6 } # Spawn zro deposit
			}
			0 = {
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "dark_matter" ADD = 3 }
				planet_event = { id = suelg_spawn_resource.7 } # Spawn dark_matter deposit
			}
			0 = {
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "physics" ADD = 10 }
				modifier = { add = 10 can_have_minor_physics_deposits = yes }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_observant F = 1.05 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_observant_2 F = 1.10 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_observant_3 F = 1.15 }

				planet_event = { id = suelg_spawn_resource.8 } # Spawn physics deposit
			}
			0 = {
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "society" ADD = 10 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_observant F = 1.05 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_observant_2 F = 1.10 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_observant_3 F = 1.15 }

				planet_event = { id = suelg_spawn_resource.9 } # Spawn society deposit
			}
			0 = {
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "engineering" ADD = 10 }
				modifier = { add = 10 can_have_minor_engineering_deposits = yes }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_observant F = 1.05 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_observant_2 F = 1.10 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_observant_3 F = 1.15 }

				planet_event = { id = suelg_spawn_resource.10 } # Spawn engineering deposit
			}
			0 = {
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "volatile_motes" ADD = 2 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_midas_touch F = 1.10 }

				planet_event = { id = suelg_spawn_resource.11 } # Spawn volatile_motes deposit
			}
			0 = {
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "rare_crystals" ADD = 2 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_midas_touch F = 1.10 }

				planet_event = { id = suelg_spawn_resource.12 } # Spawn rare_crystals deposit
			}
			0 = {
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "exotic_gases" ADD = 2 }
				inline_script = { script = suelg_add_mfactor_btrait T = leader_trait_midas_touch F = 1.10 }

				planet_event = { id = suelg_spawn_resource.13 } # Spawn exotic_gases deposit
			}
			0 = {
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "mineral" ADD = 90 }
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "energy" ADD = 90 }
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "trade" ADD = 90 }
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "alloy" ADD = 97 }
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "zro" ADD = 97 }
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "dark_matter" ADD = 97 }
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "physics" ADD = 90 }
				modifier = { add = 90 can_have_minor_physics_deposits = yes }
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "society" ADD = 90 }
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "engineering" ADD = 90 }
				modifier = { add = 90 can_have_minor_engineering_deposits = yes }
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "volatile_motes" ADD = 98 }
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "rare_crystals" ADD = 98 }
				inline_script = { script = suelg_ev_can_resorce_mbase RES = "exotic_gases" ADD = 98 }
				inline_script = { script = suelg_add_mfactor_btrait T = subclass_scientist_explorer F = 0.9 }

				modifier = { factor = value:suelg_advanced_survey_lvl_factor }
			}
		}
	}
}

# Spawn mineral deposit
planet_event = {
	id = suelg_spawn_resource.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		suelg_update_deposit_10 = { D = d_minerals }
		suelg_set_habitat_type = { TYPE = mining_habitat }
	}
}

# Spawn energy deposit
planet_event = {
	id = suelg_spawn_resource.3
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		suelg_update_deposit_10 = { D = d_energy }
		suelg_set_habitat_type = { TYPE = energy_habitat }
	}
}

# Spawn trade deposit
planet_event = {
	id = suelg_spawn_resource.4
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		suelg_update_deposit_10 = { D = d_trade_value }
	}
}

# Spawn alloy deposit
planet_event = {
	id = suelg_spawn_resource.5
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		suelg_update_deposit_5 = { D = d_alloys }

		suelg_get_habitat_in_orbit = yes
		if = {
			limit = { exists = event_target:t_habitat }
			event_target:t_habitat = {
				suelg_update_deposit_5 = { D = d_hab_alloy }
				suelg_new_habitat_dep_message = { TYPE = d_hab_alloy }
			}
		} else = {
			suelg_new_rare_dep_message = { TYPE = d_alloys }
		}
	}
}

# Spawn zro deposit
planet_event = {
	id = suelg_spawn_resource.6
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		suelg_update_deposit_5 = { D = d_zro_deposit }

		suelg_get_habitat_in_orbit = yes
		if = {
			limit = { exists = event_target:t_habitat }
			event_target:t_habitat = {
				suelg_update_deposit_5 = { D = d_hab_zro }
				suelg_new_habitat_dep_message = { TYPE = d_hab_zro }
			}
		} else = {
			suelg_new_rare_dep_message = { TYPE = d_zro_deposit }
		}
	}
}

# Spawn dark_matter deposit
planet_event = {
	id = suelg_spawn_resource.7
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		suelg_update_deposit_3 = { D = d_dark_matter_deposit }
		suelg_get_habitat_in_orbit = yes
		if = {
			limit = { exists = event_target:t_habitat }
			event_target:t_habitat = {
				suelg_update_deposit_3 = { D = d_hab_dark_matter }
				suelg_new_habitat_dep_message = { TYPE = d_hab_dark_matter }
			}
		} else = {
			suelg_new_rare_dep_message = { TYPE = d_dark_matter_deposit }
		}
	}
}

# Spawn physics deposit
planet_event = {
	id = suelg_spawn_resource.8
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		suelg_update_deposit_10 = { D = d_physics }
		suelg_set_habitat_type = { TYPE = research_habitat }
	}
}

# Spawn society deposit
planet_event = {
	id = suelg_spawn_resource.9
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		suelg_update_deposit_10 = { D = d_society }
		suelg_set_habitat_type = { TYPE = research_habitat }
	}
}

# Spawn engineering deposit
planet_event = {
	id = suelg_spawn_resource.10
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		suelg_update_deposit_10 = { D = d_engineering }
		suelg_set_habitat_type = { TYPE = research_habitat }
	}
}

# Spawn volatile_motes deposit
planet_event = {
	id = suelg_spawn_resource.11
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		suelg_update_deposit_5 = { D = d_volatile_motes }

		suelg_get_habitat_in_orbit = yes
		if = {
			limit = { exists = event_target:t_habitat }
			event_target:t_habitat = {
				suelg_update_deposit_5 = { D = d_hab_mote }
				suelg_new_habitat_dep_message = { TYPE = d_hab_mote }
			}
		} else = {
			suelg_new_rare_dep_message = { TYPE = d_volatile_motes }
		}
	}
}

# Spawn rare_crystals deposit
planet_event = {
	id = suelg_spawn_resource.12
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		suelg_update_deposit_5 = { D = d_rare_crystals }

		suelg_get_habitat_in_orbit = yes
		if = {
			limit = { exists = event_target:t_habitat }
			event_target:t_habitat = {
				suelg_update_deposit_5 = { D = d_hab_crystal }
				suelg_new_habitat_dep_message = { TYPE = d_hab_crystal }
			}
		} else = {
			suelg_new_rare_dep_message = { TYPE = d_rare_crystals }
		}
	}
}

# Spawn exotic_gases deposit
planet_event = {
	id = suelg_spawn_resource.13
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		suelg_update_deposit_5 = { D = d_exotic_gases }

		suelg_get_habitat_in_orbit = yes
		if = {
			limit = { exists = event_target:t_habitat }
			event_target:t_habitat = {
				suelg_update_deposit_5 = { D = d_hab_gas }
				suelg_new_habitat_dep_message = { TYPE = d_hab_gas }
			}
		} else = {
			suelg_new_rare_dep_message = { TYPE = d_exotic_gases }
		}
	}
}